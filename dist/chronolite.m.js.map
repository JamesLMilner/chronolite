{"version":3,"file":"chronolite.m.js","sources":["../chronolite.js"],"sourcesContent":["module.exports = class chronolite {\n\n\tconstructor() {\n\t\tthis.defaultIterations = 20;\n\t}\n\n\tvalidInput(obj) {\n\n\t\tconst objStr = JSON.stringify(obj);\n\t\tif (obj === undefined) {\n\t\t\treturn [false, \"passed object is undefined: \" + objStr];\n\t\t}\n\t\tif (typeof obj.fn !== \"function\") {\n\t\t\treturn [false, \"function (fn) is not a function type: \" + objStr];\n\t\t}\n\t\tif (obj.fnArgs !== undefined && !Array.isArray(obj.fnArgs)) {\n\t\t\treturn [false, \"function args (fnArgs) is not an array: \" + objStr];\n\t\t}\n\t\tif (obj.binding !== undefined && typeof obj.binding !== \"object\") {\n\t\t\treturn [false, \"binding is defined but not an object (got \" +\n\t\t\t\t\ttypeof obj + \") with value: \" + objStr];\n\t\t}\n\t\treturn [true, \"\"];\n\n\t}\n\n\t// Time code\n\t_setup(fnToTime) {\n\t\tconst valid = this.validInput(fnToTime);\n\n\t\tif (!valid[0]) {\n\t\t\tthrow Error(valid[1]);\n\t\t}\n\t\t\n\t\tfnToTime.binding = (fnToTime.binding === undefined) ? null : fnToTime.binding;\n\t}\n\n\t_emptyTimeResult() {\n\t\treturn {\n\t\t\ttotalTime: 0,\n\t\t\taverageTime: Infinity,\n\t\t\tfastestTime: Infinity,\n\t\t\tslowestTime: -Infinity,\n\t\t};\n\t}\n\n\t_compareTimes(iterationTime, result) {\n\t\tif (iterationTime < result.fastestTime) {\n\t\t\tresult.fastestTime = iterationTime;\n\t\t}\n\t\tif (iterationTime > result.slowestTime) {\n\t\t\tresult.slowestTime = iterationTime;\n\t\t}\n\n\t\tresult.totalTime += iterationTime;\n\t}\n\n\ttime(fnToTime, iterations) {\n\n\t\titerations = iterations || this.defaultIterations;\n\t\tthis._setup(fnToTime);\n\t\tconst result = this._emptyTimeResult();\n\n\t\tfor (let i = 0; i < iterations; i++) {\n\n\t\t\tconst start = new Date();\n\t\t\tfnToTime.fn.apply(fnToTime.binding, fnToTime.fnArgs);\n\t\t\tconst end = new Date();\n\n\t\t\tconst iterationTime = end - start;\n\t\t\tthis._compareTimes(iterationTime, result);\n\n\t\t}\n\n\t\tresult.averageTime = result.totalTime / iterations;\n\n\t\treturn result;\n\n\t}\n\n\tasync timeAsync(fnToTime, iterations) {\n\t\t\n\t\titerations = iterations || this.defaultIterations;\n\t\tthis._setup(fnToTime);\n\t\tconst result = this._emptyTimeResult();\n\n\t\tfor (let i = 0; i < iterations; i++) {\n\n\t\t\tconst start = new Date();\n\t\t\tawait fnToTime.fn.apply(fnToTime.binding, fnToTime.fnArgs);\n\t\t\tconst end = new Date();\n\n\t\t\tconst iterationTime = end - start;\n\t\t\tthis._compareTimes(iterationTime, result);\n\n\t\t}\n\n\t\tresult.averageTime = result.totalTime / iterations;\n\n\t\treturn result;\n\t\n\t}\n\n\t// Comparison Code\n\n\t_handleComparison(time, result, index, objId) {\n\t\ttime.id = objId;\n\t\tif (time.averageTime < result.fastestAverageTime) {\n\t\t\tresult.fastestIndex = index;\n\t\t\tresult.fastestId = time.id;\n\t\t\tresult.fastestAverageTime = time.averageTime;\n\t\t}\n\t\tresult.timeTaken[index] = time;\n\t}\n\n\t_emptyCompareResult() {\n\t\treturn {\n\t\t\tfastestIndex: undefined,\n\t\t\tfastestId: undefined,\n\t\t\tfastestAverageTime: Infinity,\n\t\t\ttimeTaken: [],\n\t\t};\n\t}\n\n\tcompare(fnsToCompare, iterations) {\n\t\t\n\t\titerations = iterations || this.defaultIterations;\n\t\tconst result = this._emptyCompareResult();\n\t\n\t\tfor (let i =0; i < fnsToCompare.length; i++) {\n\t\t\tconst fnObj = fnsToCompare[i];\n\t\t\tconst time = this.time(fnObj, iterations);\n\t\t\tthis._handleComparison(time, result, i, fnObj.id);\n\t\t}\n\n\t\tif (result.fastestId === undefined) delete result.fastestId;\n\n\t\treturn result;\n\n\t}\n\n\tasync compareAsync(fnsToCompare, iterations) {\n\n\t\titerations = iterations || this.defaultIterations;\n\t\tconst result = this._emptyCompareResult();\n\t\n\t\tfor (let i = 0; i < fnsToCompare.length; i++) {\n\t\t\tconst fnObj = fnsToCompare[i];\n\t\t\tconst time = await this.timeAsync(fnObj, iterations);\n\t\t\tthis._handleComparison(time, result, i, fnObj.id);\n\t\t}\n\n\t\tif (result.fastestId === undefined) delete result.fastestId;\n\n\t\treturn result;\n\n\t}\n\n};"],"names":["module","exports","this","defaultIterations","validInput","obj","const","objStr","JSON","stringify","undefined","fn","fnArgs","Array","isArray","binding","_setup","fnToTime","valid","Error","_emptyTimeResult","totalTime","averageTime","Infinity","fastestTime","slowestTime","_compareTimes","iterationTime","result","time","iterations","i","start","Date","apply","end","timeAsync","let","then","_handleComparison","index","objId","id","fastestAverageTime","fastestIndex","fastestId","timeTaken","_emptyCompareResult","compare","fnsToCompare","length","fnObj","compareAsync","$await_6"],"mappings":"AAAAA,OAAOC,mBAEN,aACCC,KAAKC,kBAAoB,sBAG1BC,oBAAWC,GAEVC,IAAMC,EAASC,KAAKC,UAAUJ,GAC9B,YAAYK,IAARL,IACK,EAAO,+BAAiCE,GAE3B,mBAAXF,EAAIM,KACN,EAAO,yCAA2CJ,QAExCG,IAAfL,EAAIO,QAAyBC,MAAMC,QAAQT,EAAIO,aAG/BF,IAAhBL,EAAIU,SAAgD,iBAAhBV,EAAIU,UACnC,EAAO,oDACNV,EAAM,iBAAmBE,KAE3B,EAAM,MANL,EAAO,2CAA6CA,gBAW9DS,gBAAOC,GACNX,IAAMY,EAAQhB,KAAKE,WAAWa,GAE9B,IAAKC,EAAM,GACV,MAAMC,MAAMD,EAAM,IAGnBD,EAASF,aAAgCL,IAArBO,EAASF,QAAyB,KAAOE,EAASF,qBAGvEK,4BACC,OACCC,UAAW,EACXC,YAAaC,SACbC,YAAaD,SACbE,aAAcF,uBAIhBG,uBAAcC,EAAeC,GACxBD,EAAgBC,EAAOJ,cAC1BI,EAAOJ,YAAcG,GAElBA,EAAgBC,EAAOH,cAC1BG,EAAOH,YAAcE,GAGtBC,EAAOP,WAAaM,eAGrBE,cAAKZ,EAAUa,GAEdA,EAAaA,GAAc5B,KAAKC,kBAChCD,KAAKc,OAAOC,GAGZ,IAFAX,IAAMsB,EAAS1B,KAAKkB,mBAEXW,EAAI,EAAGA,EAAID,EAAYC,IAAK,CAEpCzB,IAAM0B,EAAQ,IAAIC,KAClBhB,EAASN,GAAGuB,MAAMjB,EAASF,QAASE,EAASL,QAC7CN,IAAM6B,EAAM,IAAIF,UAGXP,cADiBS,EAAMH,EACMJ,GAMnC,OAFAA,EAAON,YAAcM,EAAOP,UAAYS,EAEjCF,eAIFQ,mBAAUnB,EAAUa,GAAX,2CAEdA,EAAaA,GAAc5B,KAAKC,kBAChCD,KAAKc,OAAOC,GACNW,EAAS1B,KAAKkB,oBAEfiB,MAAIN,EAAI,6MAAGA,EAAID,GAEbE,EAAQ,IAAIC,KACZhB,EAASN,GAAGuB,MAAMjB,EAASF,QAASE,EAASL,QAAnD0B,4BACMH,EAAM,IAAIF,KAGhB/B,KAAKwB,cADiBS,EAAMH,EACMJ,mEAPHG,oBAahC,OAFAH,EAAON,YAAcM,EAAOP,UAAYS,IAEjCF,8BAMRW,2BAAkBV,EAAMD,EAAQY,EAAOC,GACtCZ,EAAKa,GAAKD,EACNZ,EAAKP,YAAcM,EAAOe,qBAC7Bf,EAAOgB,aAAeJ,EACtBZ,EAAOiB,UAAYhB,EAAKa,GACxBd,EAAOe,mBAAqBd,EAAKP,aAElCM,EAAOkB,UAAUN,GAASX,eAG3BkB,+BACC,OACCH,kBAAclC,EACdmC,eAAWnC,EACXiC,mBAAoBpB,SACpBuB,2BAIFE,iBAAQC,EAAcnB,GAErBA,EAAaA,GAAc5B,KAAKC,kBAGhC,IAFAG,IAAMsB,EAAS1B,KAAK6C,sBAEXhB,EAAG,EAAGA,EAAIkB,EAAaC,OAAQnB,IAAK,CAC5CzB,IAAM6C,EAAQF,EAAalB,GACrBF,OAAYA,KAAKsB,EAAOrB,QACzBS,kBAAkBV,EAAMD,EAAQG,EAAGoB,EAAMT,IAK/C,YAFyBhC,IAArBkB,EAAOiB,kBAAgCjB,EAAOiB,UAE3CjB,eAIFwB,sBAAaH,EAAcnB,GAAf,yCAEjBA,EAAaA,GAAc5B,KAAKC,kBAC1ByB,EAAS1B,KAAK6C,uBAEfV,MAAIN,EAAI,6MAAGA,EAAIkB,EAAaC,OAEbhD,KAAKkC,UADlBe,EAAQF,EAAalB,GACcD,GAA5BQ,4BACbpC,KAAKqC,kBADQc,EACgBzB,EAAQG,EAAGoB,EAAMT,mEAHNX,oBAQzC,YAFyBrB,IAArBkB,EAAOiB,kBAAgCjB,EAAOiB,YAE3CjB"}