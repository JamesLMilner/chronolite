const n=function(){function n(){}return n.prototype.then=function(e,o){const i=new n,r=this.s;if(r){const n=1&r?e:o;if(n){try{t(i,1,n(this.v))}catch(n){t(i,2,n)}return i}return this}return this.o=function(n){try{const r=n.v;1&n.s?t(i,1,e?e(r):r):o?t(i,1,o(r)):t(i,2,r)}catch(n){t(i,2,n)}},i},n}();function t(e,o,i){if(!e.s){if(i instanceof n){if(!i.s)return void(i.o=t.bind(null,e,o));1&o&&(o=i.s),i=i.v}if(i&&i.then)return void i.then(t.bind(null,e,o),t.bind(null,e,2));e.s=o,e.v=i;const r=e.o;r&&r(e)}}function e(t){return t instanceof n&&1&t.s}const o={};!function(){function e(n){this._entry=n,this._pact=null,this._resolve=null,this._return=null,this._promise=null}function i(n){return{value:n,done:!0}}function r(n){return{value:n,done:!1}}e.prototype[Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))]=function(){return this},e.prototype._yield=function(t){return this._resolve(t&&t.then?t.then(r):r(t)),this._pact=new n},e.prototype.next=function(e){const r=this;return r._promise=new Promise(function(s){const f=r._pact;if(null===f){const t=r._entry;if(null===t)return s(r._promise);function u(n){r._resolve(n&&n.then?n.then(i):i(n)),r._pact=null,r._resolve=null}r._entry=null,r._resolve=s,t(r).then(u,function(t){if(t===o)u(r._return);else{const e=new n;r._resolve(e),r._pact=null,r._resolve=null,_resolve(e,2,t)}})}else r._pact=null,r._resolve=s,t(f,1,e)})},e.prototype.return=function(n){const e=this;return e._promise=new Promise(function(r){const s=e._pact;if(null===s)return null===e._entry?r(e._promise):(e._entry=null,r(n&&n.then?n.then(i):i(n)));e._return=n,e._resolve=r,e._pact=null,t(s,2,o)})},e.prototype.throw=function(n){const e=this;return e._promise=new Promise(function(o,i){const r=e._pact;if(null===r)return null===e._entry?o(e._promise):(e._entry=null,i(n));e._resolve=o,e._pact=null,t(r,2,n)})}}();var i=function(){this.defaultIterations=20};i.prototype.validInput=function(n){var t=JSON.stringify(n);return void 0===n?[!1,"passed object is undefined: "+t]:"function"!=typeof n.fn?[!1,"function (fn) is not a function type: "+t]:void 0===n.fnArgs||Array.isArray(n.fnArgs)?void 0!==n.binding&&"object"!=typeof n.binding?[!1,"binding is defined but not an object (got "+typeof n+") with value: "+t]:[!0,""]:[!1,"function args (fnArgs) is not an array: "+t]},i.prototype._setup=function(n){var t=this.validInput(n);if(!t[0])throw Error(t[1]);n.binding=void 0===n.binding?null:n.binding},i.prototype._emptyTimeResult=function(){return{totalTime:0,averageTime:Infinity,fastestTime:Infinity,slowestTime:-Infinity}},i.prototype._compareTimes=function(n,t){n<t.fastestTime&&(t.fastestTime=n),n>t.slowestTime&&(t.slowestTime=n),t.totalTime+=n},i.prototype.time=function(n,t){t=t||this.defaultIterations,this._setup(n);for(var e=this._emptyTimeResult(),o=0;o<t;o++){var i=new Date;n.fn.apply(n.binding,n.fnArgs);var r=new Date;this._compareTimes(r-i,e)}return e.averageTime=e.totalTime/t,e},i.prototype.timeAsync=function(o,i){try{var r=this;function s(){return f.averageTime=f.totalTime/i,f}i=i||r.defaultIterations,r._setup(o);var f=r._emptyTimeResult(),u=0,c=function(o,i,r){for(var s;;){var f=o();if(e(f)&&(f=f.v),!f)return u;if(f.then){s=0;break}var u=r();if(u&&u.then){if(!e(u)){s=1;break}u=u.s}if(i){var c=i();if(c&&c.then&&!e(c)){s=2;break}}}var a=new n,l=t.bind(null,a,2);return(0===s?f.then(m):1===s?u.then(p):c.then(d)).then(void 0,l),a;function p(n){u=n;do{if(i&&(c=i())&&c.then&&!e(c))return void c.then(d).then(void 0,l);if(!(f=o())||e(f)&&!f.v)return void t(a,1,u);if(f.then)return void f.then(m).then(void 0,l);e(u=r())&&(u=u.v)}while(!u||!u.then);u.then(p).then(void 0,l)}function m(n){n?(u=r())&&u.then?u.then(p).then(void 0,l):p(u):t(a,1,u)}function d(){(f=o())?f.then?f.then(m).then(void 0,l):m(f):t(a,1,u)}}(function(){return u<i},function(){return u++},function(){var n=new Date;return Promise.resolve(o.fn.apply(o.binding,o.fnArgs)).then(function(){var t=new Date;r._compareTimes(t-n,f)})});return c&&c.then?c.then(s):s()}catch(n){return Promise.reject(n)}},i.prototype._handleComparison=function(n,t,e,o){n.id=o,n.averageTime<t.fastestAverageTime&&(t.fastestIndex=e,t.fastestId=n.id,t.fastestAverageTime=n.averageTime),t.timeTaken[e]=n},i.prototype._emptyCompareResult=function(){return{fastestIndex:void 0,fastestId:void 0,fastestAverageTime:Infinity,timeTaken:[]}},i.prototype.compare=function(n,t){t=t||this.defaultIterations;for(var e=this._emptyCompareResult(),o=0;o<n.length;o++){var i=n[o],r=this.time(i,t);this._handleComparison(r,e,o,i.id)}return void 0===e.fastestId&&delete e.fastestId,e},i.prototype.compareAsync=function(o,i){try{var r=this;function s(){return void 0===f.fastestId&&delete f.fastestId,f}i=i||r.defaultIterations;var f=r._emptyCompareResult(),u=(c=o,a=function(n){var t=o[n];return Promise.resolve(r.timeAsync(t,i)).then(function(e){r._handleComparison(e,f,n,t.id)})},d=-1,function o(i){try{for(;++d<c.length&&(!l||!l());)if((i=a(d))&&i.then){if(!e(i))return void i.then(o,m||(m=t.bind(null,p=new n,2)));i=i.v}p?t(p,1,i):p=i}catch(n){t(p||(p=new Pact),2,n)}}(),p);return u&&u.then?u.then(s):s()}catch(n){return Promise.reject(n)}var c,a,l,p,m,d};export default i;
//# sourceMappingURL=chronolite.m.js.map
